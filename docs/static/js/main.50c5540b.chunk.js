(this.webpackJsonptienda=this.webpackJsonptienda||[]).push([[0],{40:function(e,t,c){},42:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(32),s=c.n(r),i=(c(40),c(4)),o=c(35),l="cart - agregar",d="cart - eliminar",j="cart - vaciar",u=function(e,t){var c=t.type,a=t.payload;switch(c){case l:return 0===a.quantity?e.filter((function(e){return e.product.id!==a.product.id})):[].concat(Object(o.a)(e.filter((function(e){return e.product.id!==a.product.id}))),[a]);case d:return e.filter((function(e){return e.product.id!==a}));case j:return[];default:return e}},b=c(1),O=n.a.createContext(),m=function(e){return JSON.parse(localStorage.getItem("cart-storage"))||e},h=function(e){var t=e.children,c=Object(a.useReducer)(u,[],m),n=Object(i.a)(c,2),r=n[0],s=n[1];return Object(a.useEffect)((function(){localStorage.setItem("cart-storage",JSON.stringify(r))}),[r]),Object(b.jsx)(O.Provider,{value:[r,s],children:t})},x="user - login",p="user - logout",f=function(e,t){var c=t.type,a=t.payload;switch(c){case x:return a;case p:return{correo:"",logged:!1};default:return e}},v=n.a.createContext(),g=function(e){return JSON.parse(localStorage.getItem("user-storage"))||e},N=function(e){var t=e.children,c=Object(a.useReducer)(f,{},g),n=Object(i.a)(c,2),r=n[0],s=n[1];return Object(a.useEffect)((function(){localStorage.setItem("user-storage",JSON.stringify(r))}),[r]),Object(b.jsx)(v.Provider,{value:[r,s],children:t})},y=c(10),C=c(5),w=(c(42),c(23)),k=c(3),M=c(11),L=c.n(M),S=c(16),P=c(25);c(50);P.a.initializeApp({apiKey:"AIzaSyAczVmNhlAyhqmr9kAoVg99cnj-DaHwygM",authDomain:"andy-firebase-c65f7.firebaseapp.com",projectId:"andy-firebase-c65f7",storageBucket:"andy-firebase-c65f7.appspot.com",messagingSenderId:"262829679976",appId:"1:262829679976:web:7e47cd0617a311a0e5a2dd"});P.a;var A=P.a.firestore(),I=function(){var e=Object(S.a)(L.a.mark((function e(t,c){var a,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.collection("usuarios").where("correo","==",t).where("clave","==",c).limit(1).get();case 2:if(!(a=e.sent).empty){e.next=5;break}return e.abrupt("return",{logged:!1});case 5:return n=a.docs[0],e.abrupt("return",Object(k.a)(Object(k.a)({},n.data()),{},{id:n.id,logged:!0}));case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),q=function(){return Object(b.jsx)("div",{className:"spinner-border",role:"status",children:Object(b.jsx)("span",{className:"sr-only",children:"isLoading..."})})},D=function(){var e=function(){var e=Object(a.useContext)(v),t=Object(i.a)(e,2)[1],c=Object(a.useState)({isLoading:!1,isError:!1,errorMessage:"",correo:"",clave:""}),n=Object(i.a)(c,2),r=n[0],s=n[1],o=r.isLoading,l=r.isError,d=r.errorMessage,j=r.correo,u=r.clave;return{isLoading:o,isError:l,errorMessage:d,handleInputChange:function(e){s((function(t){return Object(k.a)(Object(k.a)({},t),{},Object(w.a)({},e.target.id,e.target.value))}))},handleSubmit:function(e){e.preventDefault(),s((function(e){return Object(k.a)(Object(k.a)({},e),{},{isLoading:!0})})),I(j,u).then((function(e){s((function(t){return Object(k.a)(Object(k.a)({},t),{},{isError:!e.logged,errorMessage:!e.logged&&"Las credenciales ingresadas no son v\xe1lidas.",isLoading:!1})})),e.logged&&t({type:x,payload:e})}))},correo:j,clave:u}}(),t=e.isLoading,c=e.isError,n=e.errorMessage,r=e.handleInputChange,s=e.handleSubmit,o=e.correo,l=e.clave;return Object(b.jsxs)("div",{className:"card card-login",children:[c&&Object(b.jsx)("div",{className:"alert alert-danger",role:"alert",children:n}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:"Bienvenido"}),Object(b.jsxs)("form",{onSubmit:s,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"correo",children:"Direcci\xf3n de correo"}),Object(b.jsx)("input",{onChange:r,value:o,type:"email",className:"form-control",id:"correo",placeholder:"name@example.com"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"clave",children:"Contrase\xf1a"}),Object(b.jsx)("input",{onChange:r,value:l,type:"password",className:"form-control",id:"clave",placeholder:"********"})]}),t?Object(b.jsx)("div",{className:"col text-center",children:Object(b.jsx)(q,{})}):Object(b.jsx)("button",{type:"submit",className:"btn btn-success btn-block",children:"Iniciar sesi\xf3n"})]})]})]})},E=function(){return Object(b.jsx)("div",{className:"container d-flex justify-content-center align-items-center min-100vh",children:Object(b.jsx)(D,{})})},F=function(){var e=Object(a.useContext)(v),t=Object(i.a)(e,2),c=t[0],n=t[1],r=Object(C.g)();return Object(b.jsxs)("nav",{className:"navbar navbar-dark navbar-expand-lg bg-dark",children:[Object(b.jsx)(y.c,{className:"navbar-brand",to:"/",children:"Mi Tienda"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(b.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(y.c,{activeClassName:"active",className:"nav-link",exact:!0,to:"/",children:"Inicio"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(y.c,{activeClassName:"active",className:"nav-link",to:"/productos",children:"Productos"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(y.c,{activeClassName:"active",className:"nav-link",to:"/mi-carrito",children:"Mi Carrito"})}),c.logged&&Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(y.c,{activeClassName:"active",className:"nav-link",to:"/mi-historial",children:"Mi Historial"})})]}),Object(b.jsx)("ul",{className:"navbar-nav",children:Object(b.jsxs)("li",{className:"nav-item dropdown",children:[Object(b.jsx)("button",{className:"btn btn-link nav-link dropdown-toggle",id:"navbarDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:c.logged?c.nombre:"Mi cuenta"}),Object(b.jsx)("div",{className:"dropdown-menu  dropdown-menu-right","aria-labelledby":"navbarDropdown",children:c.logged?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{onClick:function(){n({type:p}),r.replace("/login")},className:"btn btn-link dropdown-item",children:"Cerrar sesi\xf3n"})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y.b,{className:"dropdown-item",to:"/login",children:"Iniciar sesi\xf3n"}),Object(b.jsx)(y.b,{className:"dropdown-item",to:"/register",children:"Registrarse"})]})})]})})]})]})},T=function(){return Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsxs)("div",{className:"jumbotron",children:[Object(b.jsx)("h1",{className:"display-6",children:"Bienvenido a mi tienda"}),Object(b.jsx)("p",{className:"lead",children:"Aqu\xed encontrar\xe1s muchos productos de primera necesidad."}),Object(b.jsx)("hr",{className:"my-4"}),Object(b.jsx)("p",{children:"It uses utility classNamees for typography and spacing to space content out within the larger container."}),Object(b.jsx)("p",{className:"lead",children:Object(b.jsx)(y.c,{className:"btn btn-primary",to:"/productos",role:"button",children:"Empezar ahora"})})]})})},_=function(){var e=Object(a.useContext)(O),t=Object(i.a)(e,2),c=t[0],n=t[1];return{cart:c,addToCart:function(e){return n({type:l,payload:e})},deleteFromCart:function(e){return n({type:d,payload:e})},cleanCart:function(){return n({type:j})}}},Q=function(e){var t=e.cart,c=e.handleDeleteItem;return Object(b.jsxs)("table",{className:"table table-sm",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Producto"}),Object(b.jsx)("th",{scope:"col",children:"Precio"}),Object(b.jsx)("th",{scope:"col",children:"Cantidad"}),Object(b.jsx)("th",{scope:"col",children:"Total"}),Object(b.jsx)("th",{scope:"col",children:"Eliminar"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){var t,a=e.product,n=e.quantity;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:a.nombre}),Object(b.jsx)("td",{children:a.precio}),Object(b.jsx)("td",{children:n}),Object(b.jsx)("td",{children:null===(t=n*a.precio)||void 0===t?void 0:t.toFixed(2)}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return c(a.id)},type:"button",className:"btn btn-sm btn-danger",children:Object(b.jsx)("i",{className:"fa fa-trash"})})})]},a.id)}))})]})},B=function(e){return e.reduce((function(e,t){return e+t.product.precio*t.quantity}),0)},J=function(){var e=Object(S.a)(L.a.mark((function e(t,c){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.collection("carts").add({cart:t,total:B(t),fecha:new Date,user:{id:c.id,nombre:c.nombre,correo:c.correo}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),V=function(){var e=Object(S.a)(L.a.mark((function e(t){var c,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.collection("carts").where("user.id","==",t.id).get();case 2:return c=e.sent,a=c.docs.map((function(e){return Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id})})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),c=Object(i.a)(t,2),n=c[0],r=c[1],s=Object(a.useCallback)((function(){return r(!0)}),[]),o=Object(a.useCallback)((function(){return r(!1)}),[]);return{isOpen:n,openModal:s,closeModal:o,setIsOpen:r}},R=function(e){var t=e.children,c=e.title,a=e.isOpen,n=e.closeModal;return Object(b.jsx)("div",{className:"modal-custom animate__animated ".concat(a?"animate__backInDown show":"animate__backOutDown"),tabIndex:"-1",children:Object(b.jsx)("div",{className:"modal-dialog",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsxs)("div",{className:"modal-header",children:[Object(b.jsx)("h5",{className:"modal-title",children:c}),Object(b.jsx)("button",{onClick:n,type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(b.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),t]})})})},H=function(){var e=function(){var e=_(),t=e.cart,c=e.cleanCart,n=Object(a.useContext)(v),r=Object(i.a)(n,1)[0],s=z(),o=s.isOpen,l=s.openModal,d=s.closeModal,j=Object(a.useState)({isLoading:!1,infoMessage:null,total:0}),u=Object(i.a)(j,2),b=u[0],O=u[1];Object(a.useEffect)((function(){O((function(e){return Object(k.a)(Object(k.a)({},e),{},{total:B(t)})}))}),[t]);var m=b.isLoading,h=b.infoMessage,x=b.total,p=function(){var e=Object(S.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.logged){e.next=11;break}if(0!==t.length){e.next=4;break}return O((function(e){return Object(k.a)(Object(k.a)({},e),{},{infoMessage:"No hay productos en el carrito."})})),e.abrupt("return");case 4:return O((function(e){return Object(k.a)(Object(k.a)({},e),{},{isLoading:!0})})),e.next=7,J(t,r);case 7:c(),O((function(e){return Object(k.a)(Object(k.a)({},e),{},{isLoading:!1,infoMessage:"El pedido fue enviado con \xe9xito."})})),e.next=12;break;case 11:l();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r.logged&&o&&d()}),[r,d,o]),{isOpen:o,closeModal:d,isLoading:m,infoMessage:h,total:x,handlePay:p}}(),t=e.isOpen,c=e.closeModal,n=e.infoMessage,r=e.total,s=e.isLoading,o=e.handlePay;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[n&&Object(b.jsx)("div",{className:"alert alert-info",children:n}),Object(b.jsx)("h5",{className:"card-title",children:"Total de compra"}),Object(b.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(b.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Subtotal",Object(b.jsx)("span",{className:"badge badge-primary badge-pill",children:r.toFixed(2)})]}),Object(b.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Descuento",Object(b.jsx)("span",{className:"badge badge-primary badge-pill",children:0})]}),Object(b.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Total",Object(b.jsx)("span",{className:"badge badge-primary badge-pill",children:r.toFixed(2)})]})]}),s?Object(b.jsx)("div",{className:"col text-center",children:Object(b.jsx)(q,{})}):Object(b.jsxs)("button",{onClick:o,className:"btn btn-success btn-block",children:[Object(b.jsx)("i",{className:"fas fa-store"})," Confirmar compra"]})]})}),t&&Object(b.jsx)(R,{isOpen:t,closeModal:c,title:"Para continuar inicia sesi\xf3n.",children:Object(b.jsx)(D,{})})]})},$=function(){var e=_(),t=e.cart,c=e.deleteFromCart;return Object(b.jsxs)("div",{className:"container mt-3",children:[Object(b.jsxs)("h1",{children:["Mi carrito (",t.length,")"]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-8",children:Object(b.jsx)(Q,{cart:t,handleDeleteItem:c})}),Object(b.jsx)("div",{className:"col-md-4",children:Object(b.jsx)(H,{})})]})]})},K=function(e){var t=e.activeCart;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("table",{className:"table table-sm",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Producto"}),Object(b.jsx)("th",{scope:"col",children:"Cantidad"}),Object(b.jsx)("th",{scope:"col",children:"Precio"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:e.product.nombre}),Object(b.jsx)("td",{children:e.quantity}),Object(b.jsx)("td",{children:e.product.precio})]},e.product.id)}))}),Object(b.jsx)("tfoot",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{}),Object(b.jsx)("th",{children:"TOTAL"}),Object(b.jsx)("td",{children:B(t)})]})})]})})},G=function(e){var t=e.carts,c=e.handleViewDetail;return Object(b.jsxs)("table",{className:"table table-striped",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Fecha de compra"}),Object(b.jsx)("th",{scope:"col",children:"Total en compra"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:new Date(1e3*e.fecha.seconds).toLocaleString()}),Object(b.jsx)("td",{children:e.total}),Object(b.jsx)("td",{children:Object(b.jsxs)("button",{onClick:function(){return c(e.cart)},className:"btn btn-sm btn-outline-secondary",children:[Object(b.jsx)("i",{className:"fas fa-eye"})," Detalle de compra"]})})]},e.id)}))})]})},U=function(){var e=function(){var e=Object(a.useContext)(v),t=Object(i.a)(e,1)[0],c=Object(a.useState)({carts:[],isLoading:!0,activeCart:null}),n=Object(i.a)(c,2),r=n[0],s=n[1],o=r.carts,l=r.isLoading,d=r.activeCart;return Object(a.useEffect)((function(){V(t).then((function(e){s((function(t){return Object(k.a)(Object(k.a)({},t),{},{carts:e,isLoading:!1})}))}))}),[t]),{handleViewDetail:function(e){s((function(t){return Object(k.a)(Object(k.a)({},t),{},{activeCart:e})}))},carts:o,activeCart:d,isLoading:l}}(),t=e.isLoading,c=e.carts,n=e.handleViewDetail,r=e.activeCart;return Object(b.jsxs)("div",{className:"container mt-3",children:[Object(b.jsx)("h1",{children:"Mi historial de compras"}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-7",children:t?Object(b.jsx)("div",{className:"col text-center mt-5",children:Object(b.jsx)(q,{})}):Object(b.jsx)(G,{carts:c,handleViewDetail:n})}),Object(b.jsxs)("div",{className:"col-md-5",children:[Object(b.jsx)("h3",{children:"Detalle de compra"}),r?Object(b.jsx)(K,{activeCart:r}):Object(b.jsx)("div",{className:"alert alert-info",children:"No ha seleccionado una compra a\xfan."})]})]})]})},W="itemCart - update",X="itemCart - increase",Y="itemCart - decrease",Z=function(e,t){var c=t.type,a=t.payload;switch(c){case X:return Object(k.a)(Object(k.a)({},e),{},{quantity:e.quantity+1,total:e.product.precio*(e.quantity+1)});case Y:return Object(k.a)(Object(k.a)({},e),{},{quantity:e.quantity-1,total:e.product.precio*(e.quantity-1)});case W:return Object(k.a)(Object(k.a)({},e),{},{units:a});default:return e}},ee=function(e){var t=e.increaseQuantity,c=e.decreaseQuantity,a=e.quantity;return Object(b.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("button",{type:"button",onClick:c,className:"btn btn-primary",children:Object(b.jsx)("i",{className:"fas fa-minus"})})}),Object(b.jsx)("input",{value:a,readOnly:!0,type:"text",className:"form-control text-center fs-4"}),Object(b.jsx)("div",{className:"input-group-append",children:Object(b.jsx)("button",{type:"button",onClick:t,className:"btn btn-primary",children:Object(b.jsx)("i",{className:"fas fa-plus"})})})]})},te=Object(a.memo)((function(e){var t,c=e.isOpen,n=e.closeModal,r=e.product,s=function(e){var t,c=_(),n=c.addToCart,r=(null===(t=c.cart.find((function(t){return t.product.id===e.id})))||void 0===t?void 0:t.quantity)||0,s=Object(a.useReducer)(Z,{product:e,total:0,quantity:r,units:r}),o=Object(i.a)(s,2),l=o[0],d=o[1],j=l.total,u=l.quantity;return{units:l.units,quantity:u,increaseQuantity:function(){d({type:X})},decreaseQuantity:function(){d({type:Y})},total:j,handleAdd:function(){n({product:e,quantity:u}),d({type:W,payload:u})}}}(r),o=s.units,l=s.quantity,d=s.increaseQuantity,j=s.decreaseQuantity,u=s.total,O=s.handleAdd;return Object(b.jsxs)(R,{title:null===r||void 0===r?void 0:r.nombre,isOpen:c,closeModal:n,children:[Object(b.jsx)("div",{className:"modal-body",children:Object(b.jsxs)("div",{className:"container-fluid",children:[0!==o&&Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("div",{className:"alert alert-info",children:["Hay ",o," unidad(es) en el carrito"]})})}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-5",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("img",{className:"img-fluid",src:null===r||void 0===r?void 0:r.url_imagen,alt:null===r||void 0===r?void 0:r.nombre})})}),Object(b.jsx)("div",{className:"row mt-2",children:Object(b.jsx)("div",{className:"col",children:Object(b.jsx)(ee,{increaseQuantity:d,decreaseQuantity:j,quantity:l})})})]}),Object(b.jsxs)("div",{className:"col-md-7",children:[Object(b.jsx)("p",{children:null===r||void 0===r?void 0:r.descripcion}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("small",{className:"text-muted",children:["$ ",null===r||void 0===r||null===(t=r.precio)||void 0===t?void 0:t.toFixed(2)]})}),Object(b.jsxs)("div",{className:"col",children:["$ ",null===u||void 0===u?void 0:u.toFixed(2)]})]})]})]})]})}),Object(b.jsxs)("div",{className:"modal-footer",children:[Object(b.jsx)("button",{onClick:n,type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Cerrar"}),Object(b.jsx)("button",{onClick:O,type:"button",className:"btn btn-success",children:"Agregar"})]})]})})),ce=Object(a.memo)((function(e){var t=e.product,c=e.handleAddToCart;return Object(b.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-6 animate__animated animate__fadeIn",children:Object(b.jsxs)("div",{className:"card mb-3",children:[Object(b.jsx)("img",{src:t.url_imagen,className:"card-img-top",alt:t.nombre}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:t.nombre}),Object(b.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:["$ ",t.precio.toFixed(2)]}),Object(b.jsxs)("button",{onClick:function(){return c(t)},type:"button",className:"btn btn-sm btn-block btn-primary",children:[Object(b.jsx)("i",{className:"fas fa-plus"})," Agregar al carrito"]})]})]})})})),ae=Object(a.memo)((function(e){var t=e.products,c=function(){var e=Object(a.useState)({activeProduct:null}),t=Object(i.a)(e,2),c=t[0],n=t[1],r=c.activeProduct,s=z(),o=s.isOpen,l=s.openModal;return{activeProduct:r,isOpen:o,closeModal:s.closeModal,handleAddToCart:Object(a.useCallback)((function(e){n({activeProduct:e}),l()}),[l])}}(),n=c.activeProduct,r=c.isOpen,s=c.closeModal,o=c.handleAddToCart;return Object(b.jsxs)(b.Fragment,{children:[t.map((function(e){return Object(b.jsx)(ce,{product:e,handleAddToCart:o},e.id)})),r&&Object(b.jsx)(te,{closeModal:s,isOpen:r,product:n})]})})),ne=function(){var e=Object(S.a)(L.a.mark((function e(){var t,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.collection("productos").get();case 2:return t=e.sent,c=t.docs.map((function(e){return Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id})})),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=function(){var e=Object(a.useState)({isLoading:!0,products:[],filteredProducts:[],search:""}),t=Object(i.a)(e,2),c=t[0],n=t[1],r=c.search,s=c.isLoading,o=c.products,l=c.filteredProducts;Object(a.useEffect)((function(){ne().then((function(e){n((function(t){return Object(k.a)(Object(k.a)({},t),{},{filteredProducts:e,products:e,isLoading:!1})}))}))}),[]);var d=Object(a.useCallback)((function(){n((function(e){return Object(k.a)(Object(k.a)({},e),{},{isLoading:!0})}));var e=o.filter((function(e){return e.nombre.toLowerCase().includes(r.toLowerCase())}));n((function(t){return Object(k.a)(Object(k.a)({},t),{},{isLoading:!1,filteredProducts:e})}))}),[o,r]);return{search:r,isLoading:s,products:o,filteredProducts:l,handleChangeSearch:function(e){n((function(t){return Object(k.a)(Object(k.a)({},t),{},{search:e.target.value})}))},handleClickSearch:d}}(),t=e.search,c=e.isLoading,n=e.filteredProducts,r=e.handleChangeSearch,s=e.handleClickSearch;return Object(b.jsxs)("div",{className:"container mt-3",children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-10",children:Object(b.jsx)("input",{value:t,onChange:r,onKeyPress:function(e){"Enter"===e.code&&s()},type:"text",className:"form-control",placeholder:"Buscar producto..."})}),Object(b.jsx)("div",{className:"col-md-2",children:Object(b.jsx)("button",{type:"button",onClick:s,className:"btn btn-primary",children:"Buscar"})})]}),Object(b.jsx)("div",{className:"row mt-3",children:c?Object(b.jsx)("div",{className:"col text-center mt-5",children:Object(b.jsx)(q,{})}):Object(b.jsx)(ae,{products:n})})]})},se=c(24),ie=function(e){var t=e.isAuthenticated,c=e.component,a=Object(se.a)(e,["isAuthenticated","component"]);return Object(b.jsx)(C.b,Object(k.a)(Object(k.a)({},a),{},{component:function(e){return t?Object(b.jsx)(c,Object(k.a)({},e)):Object(b.jsx)(C.a,{to:"/login"})}}))},oe=function(){var e=Object(a.useContext)(v),t=Object(i.a)(e,1)[0];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(F,{}),Object(b.jsxs)(C.d,{children:[Object(b.jsx)(ie,{path:"/mi-historial",isAuthenticated:t.logged,component:U}),Object(b.jsx)(C.b,{path:"/mi-carrito",children:Object(b.jsx)($,{})}),Object(b.jsx)(C.b,{path:"/productos",children:Object(b.jsx)(re,{})}),Object(b.jsx)(C.b,{path:"/",children:Object(b.jsx)(T,{})})]})]})},le=function(e){var t=e.isAuthenticated,c=e.component,a=Object(se.a)(e,["isAuthenticated","component"]);return Object(b.jsx)(C.b,Object(k.a)(Object(k.a)({},a),{},{component:function(e){return t?Object(b.jsx)(C.a,{to:"/"}):Object(b.jsx)(c,Object(k.a)({},e))}}))},de=function(){var e=Object(a.useContext)(v),t=Object(i.a)(e,1)[0];return Object(b.jsx)(y.a,{children:Object(b.jsxs)(C.d,{children:[Object(b.jsx)(le,{isAuthenticated:t.logged,exact:!0,path:"/login",component:E}),Object(b.jsx)(C.b,{path:"/",component:oe})]})})},je=function(){return Object(b.jsx)(N,{children:Object(b.jsx)(h,{children:Object(b.jsx)(de,{})})})};s.a.render(Object(b.jsx)(je,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.50c5540b.chunk.js.map